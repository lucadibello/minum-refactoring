# Variables
TEX=pdflatex
BIB=bibtex
MAIN=assignment_report
SRC=$(MAIN).tex
BIBFILE=references
PDF=$(MAIN).pdf

# Auxiliary files generated by LaTeX
AUX=$(MAIN).aux
BBL=$(MAIN).bbl
BLG=$(MAIN).blg
LOG=$(MAIN).log
OUT=$(MAIN).out
TOC=$(MAIN).toc
FLO=$(MAIN).fls
LOT=$(MAIN).lot
LOF=$(MAIN).lof

# Default target
all: $(PDF)

# Rule to build PDF
$(PDF): $(SRC) $(BIBFILE).bib
	@echo "Compiling LaTeX document..."
	$(TEX) $(MAIN).tex
	@echo "Processing bibliography..."
	$(BIB) $(MAIN)
	@echo "Re-compiling LaTeX document (second pass)..."
	$(TEX) $(MAIN).tex
	@echo "Finalizing PDF (third pass)..."
	$(TEX) $(MAIN).tex
	@echo "Build complete: $(PDF)"

# Clean auxiliary files
clean:
	@echo "Cleaning auxiliary files..."
	rm -f $(AUX) $(BBL) $(BLG) $(LOG) $(OUT) $(TOC) $(FLO) $(LOT) $(LOF)
	@echo "Clean complete."

# Clean all
cleanall: clean
	@echo "Cleaning PDF..."
	rm -f $(PDF)
	@echo "Clean all complete."

# Phony targets
.PHONY: all clean
